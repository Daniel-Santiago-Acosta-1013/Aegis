#!/usr/bin/env python3
"""
Script de prueba para el sistema de instalaciÃ³n automÃ¡tica
"""

import asyncio
from rich.console import Console
from .utils.installer import ToolInstaller


async def test_installer():
    """Prueba bÃ¡sica del instalador"""
    console = Console()
    installer = ToolInstaller(console)
    
    console.print("[bold blue]ğŸ§ª Probando sistema de instalaciÃ³n...[/bold blue]\n")
    
    # Verificar prerequisitos
    console.print("[cyan]ğŸ“‹ Verificando prerequisitos...[/cyan]")
    prereqs = installer.check_prerequisites()
    for name, available in prereqs.items():
        status = "âœ“" if available else "âœ—"
        console.print(f"  {status} {name}: {'Disponible' if available else 'No disponible'}")
    
    console.print()
    
    # Mostrar herramientas disponibles
    console.print("[cyan]ğŸ”§ Herramientas disponibles para instalar:[/cyan]")
    tools = installer.get_available_tools()
    for tool in tools:
        installable = installer.is_tool_installable(tool)
        methods = installer.get_install_methods(tool)
        
        status = "ğŸ“¦" if installable else "âŒ"
        console.print(f"  {status} {tool}: {installable} (mÃ©todos: {methods})")
    
    console.print()
    
    # Ejemplo de instalaciÃ³n (comentado para evitar instalaciones accidentales)
    # console.print("[yellow]âš ï¸  Para probar instalaciÃ³n, descomenta las lÃ­neas siguientes[/yellow]")
    # success, message = await installer.install_tool('nuclei')
    # console.print(f"Resultado: {success} - {message}")


if __name__ == "__main__":
    asyncio.run(test_installer()) 