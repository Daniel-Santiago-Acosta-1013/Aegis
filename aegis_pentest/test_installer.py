#!/usr/bin/env python3
"""
Script de prueba para el sistema de instalación automática
"""

import asyncio
from rich.console import Console
from .utils.installer import ToolInstaller


async def test_installer():
    """Prueba básica del instalador"""
    console = Console()
    installer = ToolInstaller(console)
    
    console.print("[bold blue]🧪 Probando sistema de instalación...[/bold blue]\n")
    
    # Verificar prerequisitos
    console.print("[cyan]📋 Verificando prerequisitos...[/cyan]")
    prereqs = installer.check_prerequisites()
    for name, available in prereqs.items():
        status = "✓" if available else "✗"
        console.print(f"  {status} {name}: {'Disponible' if available else 'No disponible'}")
    
    console.print()
    
    # Mostrar herramientas disponibles
    console.print("[cyan]🔧 Herramientas disponibles para instalar:[/cyan]")
    tools = installer.get_available_tools()
    for tool in tools:
        installable = installer.is_tool_installable(tool)
        methods = installer.get_install_methods(tool)
        
        status = "📦" if installable else "❌"
        console.print(f"  {status} {tool}: {installable} (métodos: {methods})")
    
    console.print()
    
    # Ejemplo de instalación (comentado para evitar instalaciones accidentales)
    # console.print("[yellow]⚠️  Para probar instalación, descomenta las líneas siguientes[/yellow]")
    # success, message = await installer.install_tool('nuclei')
    # console.print(f"Resultado: {success} - {message}")


if __name__ == "__main__":
    asyncio.run(test_installer()) 